<f:for each="{allEvents}" as="event">

	<div class="event-listing with-trim">
		<h2 class="title">
			<f:if condition="{settings.singlePid}">
				<f:then>
					<f:link.action action="detail" pageUid="{settings.singlePid}" pluginName="eventslisting" arguments="{event : event}">{event.title}</f:link.action>
				</f:then>
				<f:else>
					<f:link.action action="detail" pluginName="eventslisting" arguments="{event : event}">{event.title}</f:link.action>
				</f:else>
			</f:if>
		</h2>

		<div class="news-img-wrap">
			<f:if condition="{event.hasImage}">
				<f:then>
					<f:if condition="{event.linkToUrl}">
						<f:then>
							<f:link.external uri="{event.url}" target="_blank">
								<f:image src="{event.firstImage}" alt="" width="90"/>
							</f:link.external>
						</f:then>
						<f:else>
							<f:if condition="{settings.singlePid}">
								<f:then>
									<f:link.action action="detail" pluginName="EventsListing" pageUid="{settings.singlePid}" arguments="{event : event}">
										<f:image src="{event.firstImage}" alt="" width="90"/>
									</f:link.action>
								</f:then>
								<f:else>
									<f:link.action action="detail" pluginName="EventsListing" arguments="{event : event}">
										<f:image src="{event.firstImage}" alt="" width="90"/>
									</f:link.action>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
				</f:then>
			</f:if>
		</div>

		<f:if condition="{event.spansMultipleDays}">
			<f:then>
				<p class="small date-string flush">
					<f:format.date format="F d, Y - h:i a">{event.startTime}</f:format.date>
					to
					<f:format.date format="F d, Y - h:i a">{event.endTime}</f:format.date>
				</p>
			</f:then>
			<f:else>
				<p class="small date-string flush">
					<f:format.date format="F d, Y - h:i a">{event.startTime}</f:format.date>
					to
					<f:format.date format="h:i a">{event.endTime}</f:format.date>
				</p>
			</f:else>
		</f:if>

		<f:if condition="{event.venue}">
			<p class="small venue flush">{event.venue}</p>
		</f:if>

		<f:if condition="{event.address}">
			<address class="small address">{event.address}</address>
		</f:if>

		<p>
			<strong>
				<f:format.crop maxCharacters="75" append="...">{event.teaser}</f:format.crop>
			</strong>
		</p>

		<div class="description">
			<f:format.html>{event.description}</f:format.html>
		</div>

		<f:if condition="{event.type.title}">
			<strong>Event Type:</strong>
			<f:link.action arguments="{actionMethodName:actionMethodName, type: event.type}" class="">
				{event.type.title}
			</f:link.action>
			<br/>
		</f:if>

		<strong>Event Category:</strong>
		<f:for each="{event.categories}" as="category">
			<f:link.action arguments="{actionMethodName:actionMethodName, category: category}" class="">
				{category.title}
			</f:link.action>
		</f:for>

	</div>
</f:for>